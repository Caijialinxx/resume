<!DOCTYPE html>
<html>

<head>
  <title>Caijialinxx</title>
  <!-- 加载动画css文件 -->
  <link rel="stylesheet" href="css/loading.css">
  <!-- 主页面css文件 -->
  <link rel="stylesheet" href="css/style.css">
  <!-- 作品轮播css文件 -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/Swiper/4.3.2/css/swiper.min.css">
  <!-- favicon的加载地址及样式 -->
  <script src="https://at.alicdn.com/t/font_548995_g7ry9wuf3z5jnhfr.js"></script>
  <style type="text/css">
    .icon {
      width: 1em;
      height: 1em;
      vertical-align: -1.15em;
      fill: currentColor;
      overflow: hidden;
    }
  </style>
</head>

<body>
  <div id="welcome" class="active">
    <div class="loading"></div>
  </div>

  <header>
    <div id="topNavBar" class="topNavBar offset">
      <div class="topNavBar-inner clearfix">
        <a class="logo" href="#" alt="logo">
          <span class="cjl">CJL</span>
          <span class="card">card</span>
        </a>
        <nav>
          <ul id="menu" class="clearfix">
            <li>
              <a href="#about">About</a>
            </li>
            <li>
              <a href="#skills">Skills</a>
            </li>
            <li>
              <a href="#portfolio">Portfolio</a>
              <ul class="submenu">
                <li>作品1</li>
                <li>作品2</li>
                <li>作品3</li>
              </ul>
            </li>
            <li>
              <a href="https://github.com/Caijialinxx" target="_blank">Github</a>
            </li>
            <li>
              <a href="https://caijialinxx.github.io" target="_blank">Blog</a>
              <ul class="submenu">
                <li>博客1</li>
                <li>博客2</li>
                <li>博客3</li>
              </ul>
            </li>
            <li>
              <a href="#contact">Contact</a>
            </li>
          </ul>
        </nav>
      </div>
    </div>

    <div class="banner">
      <div class="mask"></div>
    </div>
  </header>

  <div class="content">
    <section data-x id="about" class="offset">
      <div class="userCard">
        <div class="userCard-inner clearfix">
          <div class="picture">
            <!-- <img src="./images/avatar.jpg" width="299px" alt="头像"> -->
          </div>
          <div class="text clearfix">
            <div class="profile-preword">
              <span class="welcome">Hello
                <span class="triangle"></span>
              </span>
            </div>
            <div class="brief">
              <h1>蔡嘉琳</h1>
              <p>前端开发工程师</p>
            </div>
            <hr>
            <dl>
              <dt>年龄</dt>
              <dd>20</dd>
              <dt>性别</dt>
              <dd>女</dd>
              <dt>所在城市</dt>
              <dd>深圳</dd>
              <dt>邮箱</dt>
              <dd>caijialinxx@foxmail.com</dd>
              <dt>手机</dt>
              <dd>1371709****</dd>
            </dl>
          </div>
        </div>
        <footer class="media">
          <a href="https://github.com/Caijialinxx" target="_blank">
            <svg class="icon" aria-hidden="true" style="width:26px;height:26px;vertical-align: -1.05em;">
              <use xlink:href="#icon-github"></use>
            </svg>
          </a>
          <a href="https://caijialinxx.github.io" target="_blank">
            <svg class="icon" aria-hidden="true">
              <use xlink:href="#icon-blog"></use>
            </svg>
          </a>
        </footer>
      </div>

      <p class="downloadResume-wrapper">
        <a class="downloadResume" href="caijialin-resume.pdf" target="_blank" download>下载 PDF 简历</a>
      </p>

      <p class="selfIntroduction">
        蔡嘉琳，....
      </p>
    </section>

    <section data-x id="skills" class="offset">
      <h2>技能</h2>
      <ol class="clearfix">
        <li>
          <h3>HTML5 &amp; CSS3</h3>
          <div class="progressBar">
            <div class="progress" style="width:80%"></div>
          </div>
        </li>
        <!-- 如果在HTML中添加特殊符号如“&”，则需要添加转义符“\”或者“&amp;” -->
        <li>
          <h3>JavaScript</h3>
          <div class="progressBar">
            <div class="progress" style="width:85%"></div>
          </div>
        </li>
        <li>
          <h3>jQuery</h3>
          <div class="progressBar">
            <div class="progress" style="width:50%"></div>
          </div>
        </li>
        <li>
          <h3>Vue</h3>
          <div class="progressBar">
            <div class="progress" style="width:1%"></div>
          </div>
        </li>
        <li>
          <h3>React</h3>
          <div class="progressBar">
            <div class="progress" style="width:1%"></div>
          </div>
        </li>
        <li>
          <h3>HTTP</h3>
          <div class="progressBar">
            <div class="progress" style="width:70%"></div>
          </div>
        </li>
      </ol>
    </section>

    <section data-x id="portfolio" class="offset">
      <h2>作品集</h2>
      <nav>
        <ol class="clearfix">
          <li id="nav1">所有</li>
          <li id="nav2">框架</li>
          <li id="nav3">原生JS &amp; CSS</li>
        </ol>
        <div class="bar">
          <div id="bar" class="bar-inner state1"></div>
        </div>
      </nav>
      <div class="works">
        <!-- Slider main container -->
        <div class="swiper-container">
          <!-- Additional required wrapper -->
          <div class="swiper-wrapper">
            <!-- Slides -->
            <img src="images/works/apple-like_slide.png" alt="苹果风格的轮播" class="swiper-slide">
            <img src="images/works/bookmarks.png" alt="书签导航" class="swiper-slide">
            <img src="images/works/canvas.png" alt="画板" class="swiper-slide">
            <img src="images/works/slide.png" alt="轮播" class="swiper-slide">
          </div>
          <!-- pagination -->
          <div class="swiper-pagination"></div>
          <!-- navigation buttons -->
          <div class="swiper-button-prev"></div>
          <div class="swiper-button-next"></div>
        </div>
      </div>
      <script>
        nav1.onclick = function () {
          bar.className = "bar-inner state1";
          big.style.display = "block";
        }
        nav2.onclick = function () {
          bar.className = "bar-inner state2";
        }
        nav3.onclick = function () {
          bar.className = "bar-inner state3";
          big.style.display = "none";
        }
      </script>
    </section>
  </div>

  <footer class="footer">
    Made by Caijialinxx
  </footer>
</body>
<script src="https://cdnjs.cloudflare.com/ajax/libs/tween.js/17.2.0/Tween.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/Swiper/4.3.2/js/swiper.min.js"></script>
<script>
  // 设置loading
  setTimeout(function () {
    welcome.className = "finished"
    about.classList.remove("offset")
    topNavBar.classList.remove("offset")
  }, 1000)

  // 设置topNavBar样式变化
  window.onscroll = function () {
    let pageYOffset = Math.round(window.pageYOffset)
    if (pageYOffset > 0) {
      //导航栏浮起
      topNavBar.classList.add("sticky")

      //滚动到某一section高亮其对应菜单
      let section = document.querySelectorAll("[data-x]")
      let nearestIndex = 0
      for (let i = 1; i < section.length; i++) {
        let minTop = Math.abs(section[nearestIndex].offsetTop - pageYOffset)
        let currentSectionDistance = Math.abs(section[i].offsetTop - pageYOffset)
        if (currentSectionDistance < minTop) {
          nearestIndex = i
        }
      }
      let highlightLi = document.querySelector("a[href='#" + section[nearestIndex].id + "']").parentNode
      for (let i = 0; i < section.length; i++) {
        highlightLi.parentNode.children[i].classList.remove("highlight")
      }
      highlightLi.classList.add("highlight")
      //不要将两个不相关的动作，只用同一个状态来表示。如果使用active，则会在页面滚动时触发submenu
      //highlightLi.classList.add("active")

      //滚动到某一section从下浮起
      section[nearestIndex].classList.remove("offset")
    }
    else {
      topNavBar.classList.remove("sticky")
    }
  }

  // 设置导航中的子菜单
  let liTags = document.querySelectorAll("#menu > li")
  for (let i = 0; i < liTags.length; i++) {
    liTags[i].onmouseenter = function (e) {
      e.target.classList.add("active")
    }
    liTags[i].onmouseleave = function (e) {
      e.target.classList.remove("active")
    }
  }


  // 设置平滑滚动
  let aTags = document.querySelectorAll("#menu > li > a")
  for (let i = 0; i < aTags.length; i++) {
    aTags[i].onclick = function (e) {
      let href = e.target.getAttribute('href')
      if (href[0] === "#") {
        e.preventDefault()           //阻止a便签的锚点跳转事件，使得跳转时页面不会闪动
        let targetTop = document.querySelector(href).offsetTop
        let currentTop = window.pageYOffset
        /*使用库来实现平滑滚动*/
        // Setup the animation loop.
        function animate(time) {
          requestAnimationFrame(animate)
          TWEEN.update(time)
        }
        requestAnimationFrame(animate)            //浏览器根据CPU来求动画变化间隔，相当于duration
        let coords = { y: currentTop }
        let tween = new TWEEN.Tween(coords)
          .to({ y: targetTop }, 1000)             //相当于setInterval()
          .easing(TWEEN.Easing.Quadratic.InOut)   //选择动画类型
          .onUpdate(function () {                 //需要执行的动作，相当于setInterval中的function
            window.scrollTo(0, coords.y)
          })
          .start();
        /*自己使用原生JS来实现平滑滚动*/
        // let n = 20                   //动几次
        // let duration = 300 / n       //多长时间动一次
        // let times = 0
        // let distancePerTimes = (targetTop - currentTop) / n   //每次移动的距离
        // let id = setInterval(() => {
        //   times++
        //   window.scrollTo(0, currentTop + distancePerTimes * times)
        //   if (times === n) {
        //     window.clearInterval(id)
        //     return
        //   }
        // }, duration)
      }
    }
  }

  // 作品轮播
  var mySwiper = new Swiper('.swiper-container', {
    // Optional parameters
    // direction: 'vertical',
    loop: true,
    // pagination
    pagination: {
      el: '.swiper-pagination',
    },
    // Navigation arrows
    navigation: {
      nextEl: '.swiper-button-next',
      prevEl: '.swiper-button-prev',
    }
  })
</script>

</html>